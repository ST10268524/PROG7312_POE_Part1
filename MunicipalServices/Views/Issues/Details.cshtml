@model MunicipalServices.Models.Issue
@{
    ViewBag.Title = "Issue Details";
}

<div class="container mt-4">
    <div class="card shadow-sm rounded-3">
        <div class="card-header bg-light">
            <h3 class="mb-0">Issue Details</h3>
        </div>
        <div class="card-body">

            <dl class="row mb-0">
                <div class="row border-bottom py-2">
                    <dt class="col-sm-3 fw-bold">Reference Number</dt>
                    <dd class="col-sm-9">@Model.ReferenceNumber</dd>
                </div>

                <div class="row border-bottom py-2">
                    <dt class="col-sm-3 fw-bold">Location</dt>
                    <dd class="col-sm-9">@Model.Location</dd>
                </div>

                <div class="row border-bottom py-2">
                    <dt class="col-sm-3 fw-bold">Category</dt>
                    <dd class="col-sm-9">@Model.Category</dd>
                </div>

                <div class="row border-bottom py-2">
                    <dt class="col-sm-3 fw-bold">Description</dt>
                    <dd class="col-sm-9">@Model.Description</dd>
                </div>

                <div class="row border-bottom py-2">
                    <dt class="col-sm-3 fw-bold">Status</dt>
                    <dd class="col-sm-9">
                        <span class="badge
                            @(Model.Status == IssueStatus.Resolved ? "bg-success" :
                                                            Model.Status == IssueStatus.InProgress ? "bg-primary" :
                                                            Model.Status == IssueStatus.InQueue ? "bg-warning text-dark" : "bg-info")">
                            @Model.Status
                        </span>
                    </dd>
                </div>

                <div class="row border-bottom py-2">
                    <dt class="col-sm-3 fw-bold">Submitted</dt>
                    <dd class="col-sm-9">@Model.CreatedAt.ToLocalTime().ToString("f")</dd>
                </div>

                @if (!string.IsNullOrEmpty(Model.AttachmentFileName))
                {
                    <div class="row border-bottom py-2">
                        <dt class="col-sm-3 fw-bold">Attachment</dt>
                        <dd class="col-sm-9">
                            <a href="~/uploads/@Model.AttachmentFileName" class="link-primary" target="_blank">
                                View Attachment
                            </a>
                        </dd>
                    </div>
                }

                <div class="row py-2">
                    <dt class="col-sm-3 fw-bold">Notifications</dt>
                    <dd class="col-sm-9">
                        @if (Model.NotifyBySms)
                        {
                            <span class="badge bg-info text-dark">SMS</span>
                        }
                        @if (Model.NotifyByEmail)
                        {
                            <span class="badge bg-info text-dark">Email</span>
                        }
                        @if (!Model.NotifyBySms && !Model.NotifyByEmail)
                        {
                            <span class="text-muted">None</span>
                        }
                    </dd>
                </div>
            </dl>
        </div>
    </div>

    <div class="mt-3">
        <a href="@Url.Action("Index", "Issues")" class="btn btn-main fs-6">
            ← Back to Reports
        </a>
    </div>
</div>
